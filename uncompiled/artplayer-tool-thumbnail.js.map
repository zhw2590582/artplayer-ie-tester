{"version":3,"file":"artplayer-tool-thumbnail.js","sources":["../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/classCallCheck.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/createClass.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/inherits.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/typeof.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/_@babel_runtime@7.12.5@@babel/runtime/helpers/getPrototypeOf.js","../../packages/artplayer-tool-thumbnail/node_modules/tiny-emitter/index.js","../../packages/artplayer-tool-thumbnail/src/utils.js","../../packages/artplayer-tool-thumbnail/src/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","export function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function runPromisesInSeries(ps) {\n    return ps.reduce((p, next) => p.then(next), Promise.resolve());\n}\n\nexport function getFileName(name) {\n    const nameArray = name.split('.');\n    nameArray.pop();\n    return nameArray.join('.');\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}","import Emitter from 'tiny-emitter';\nimport { runPromisesInSeries, sleep, getFileName, clamp } from './utils';\n\nclass ArtplayerToolThumbnail extends Emitter {\n    constructor(option = {}) {\n        super();\n        this.processing = false;\n        this.option = {};\n        this.setup(Object.assign({}, ArtplayerToolThumbnail.DEFAULTS, option));\n        this.video = ArtplayerToolThumbnail.creatVideo();\n        this.duration = 0;\n        this.inputChange = this.inputChange.bind(this);\n        this.ondrop = this.ondrop.bind(this);\n        this.option.fileInput.addEventListener('change', this.inputChange);\n        this.option.fileInput.addEventListener('dragover', ArtplayerToolThumbnail.ondragover);\n        this.option.fileInput.addEventListener('drop', ArtplayerToolThumbnail.ondrop);\n    }\n\n    static get DEFAULTS() {\n        return {\n            delay: 300,\n            number: 60,\n            width: 160,\n            height: 90,\n            column: 10,\n            begin: 0,\n            end: NaN,\n        };\n    }\n\n    static ondragover(e) {\n        e.preventDefault();\n    }\n\n    ondrop(e) {\n        e.preventDefault();\n        const file = e.dataTransfer.files[0];\n        this.loadVideo(file);\n    }\n\n    setup(option = {}) {\n        this.option = Object.assign({}, this.option, option);\n        const { fileInput, delay, number, width, height, column } = this.option;\n\n        this.errorHandle(fileInput instanceof Element, \"The 'fileInput' is not a Element\");\n\n        if (!(fileInput.tagName === 'INPUT' && fileInput.type === 'file')) {\n            fileInput.style.position = 'relative';\n            const newFileInput = document.createElement('input');\n            newFileInput.type = 'file';\n            newFileInput.style.position = 'absolute';\n            newFileInput.style.width = '100%';\n            newFileInput.style.height = '100%';\n            newFileInput.style.left = '0';\n            newFileInput.style.top = '0';\n            newFileInput.style.right = '0';\n            newFileInput.style.bottom = '0';\n            newFileInput.style.opacity = '0';\n            fileInput.appendChild(newFileInput);\n            this.option.fileInput = newFileInput;\n        }\n\n        ['delay', 'number', 'width', 'height', 'column', 'begin', 'end'].forEach((item) => {\n            this.errorHandle(typeof this.option[item] === 'number', `The '${item}' is not a number`);\n        });\n\n        this.option.delay = clamp(delay, 10, 1000);\n        this.option.number = clamp(number, 10, 1000);\n        this.option.width = clamp(width, 10, 1000);\n        this.option.height = clamp(height, 10, 1000);\n        this.option.column = clamp(column, 1, 1000);\n        return this;\n    }\n\n    static creatVideo() {\n        const video = document.createElement('video');\n        video.style.position = 'absolute';\n        video.style.top = '-9999px';\n        video.style.left = '-9999px';\n        video.muted = true;\n        video.controls = true;\n        document.body.appendChild(video);\n        return video;\n    }\n\n    inputChange() {\n        const file = this.option.fileInput.files[0];\n        this.loadVideo(file);\n    }\n\n    loadVideo(file) {\n        const { delay } = this.option;\n        if (file) {\n            const canPlayType = this.video.canPlayType(file.type);\n            this.errorHandle(\n                canPlayType === 'maybe' || canPlayType === 'probably',\n                `Playback of this file format is not supported: ${file.type}`,\n            );\n            const videoUrl = URL.createObjectURL(file);\n            this.videoUrl = videoUrl;\n            this.file = file;\n            this.emit('file', this.file);\n            this.video.src = videoUrl;\n            sleep(delay)\n                .then(() => {\n                    this.emit('video', this.video);\n                })\n                .catch((err) => {\n                    this.emit('error', err.message);\n                    throw err;\n                });\n        }\n    }\n\n    start() {\n        if (!this.video.duration) return sleep(1000).then(this.start);\n        const { width, height, number, delay, begin, end } = this.option;\n        this.option.begin = clamp(begin, 0, this.video.duration);\n        this.option.end = clamp(end || this.video.duration, begin, this.video.duration);\n        this.errorHandle(this.option.end > this.option.begin, `End time must be greater than the start time`);\n        this.duration = this.option.end - this.option.begin;\n        this.density = number / this.duration;\n        this.errorHandle(this.file && this.video, 'Please select the video file first');\n        this.errorHandle(!this.processing, 'There is currently a task in progress, please wait a moment...');\n        this.errorHandle(this.density <= 1, `The preview density cannot be greater than 1, but got ${this.density}`);\n        const screenshotDate = this.creatScreenshotDate();\n        const canvas = this.creatCanvas();\n        const context2D = canvas.getContext('2d');\n        this.emit('canvas', canvas);\n        const promiseList = screenshotDate.map((item, index) => () => {\n            this.video.currentTime = item.time;\n            return new Promise((resolve) => {\n                sleep(delay)\n                    .then(() => {\n                        context2D.drawImage(this.video, item.x, item.y, width, height);\n                        canvas.toBlob((blob) => {\n                            if (this.thumbnailUrl) {\n                                URL.revokeObjectURL(this.thumbnailUrl);\n                            }\n                            this.thumbnailUrl = URL.createObjectURL(blob);\n                            this.emit('update', this.thumbnailUrl, (index + 1) / number);\n                            resolve();\n                        });\n                    })\n                    .catch((err) => {\n                        throw err;\n                    });\n            });\n        });\n        this.processing = true;\n        return runPromisesInSeries(promiseList)\n            .then(() =>\n                sleep(delay * 2)\n                    .then(() => {\n                        this.processing = false;\n                        this.emit('done');\n                    })\n                    .catch((err) => {\n                        this.processing = false;\n                        this.emit('error', err.message);\n                        throw err;\n                    }),\n            )\n            .catch((err) => {\n                this.processing = false;\n                this.emit('error', err.message);\n                throw err;\n            });\n    }\n\n    creatScreenshotDate() {\n        const { number, width, height, column, begin } = this.option;\n        const timeGap = this.duration / number;\n        const timePoints = [begin + timeGap];\n        while (timePoints.length < number) {\n            const last = timePoints[timePoints.length - 1];\n            timePoints.push(last + timeGap);\n        }\n        return timePoints.map((item, index) => ({\n            time: item - timeGap / 2,\n            x: (index % column) * width,\n            y: Math.floor(index / column) * height,\n        }));\n    }\n\n    creatCanvas() {\n        const { number, width, height, column } = this.option;\n        const canvas = document.createElement('canvas');\n        const context2D = canvas.getContext('2d');\n        canvas.width = width * column;\n        canvas.height = Math.ceil(number / column) * height + 30;\n        context2D.fillStyle = 'black';\n        context2D.fillRect(0, 0, canvas.width, canvas.height);\n        context2D.font = '14px Georgia';\n        context2D.fillStyle = '#fff';\n        context2D.fillText(\n            `From: https://artplayer.org/, Number: ${number}, Width: ${width}, Height: ${height}, Column: ${column}`,\n            10,\n            canvas.height - 11,\n        );\n        return canvas;\n    }\n\n    download() {\n        this.errorHandle(\n            this.file && this.thumbnailUrl,\n            'Download does not seem to be ready, please create preview first',\n        );\n        this.errorHandle(!this.processing, 'There is currently a task in progress, please wait a moment...');\n        const elink = document.createElement('a');\n        const name = `${getFileName(this.file.name)}.png`;\n        elink.download = name;\n        elink.href = this.thumbnailUrl;\n        document.body.appendChild(elink);\n        elink.click();\n        document.body.removeChild(elink);\n        this.emit('download', name);\n        return this;\n    }\n\n    errorHandle(condition, msg) {\n        if (!condition) {\n            this.emit('error', msg);\n            throw new Error(msg);\n        }\n    }\n\n    destroy() {\n        this.option.fileInput.removeEventListener('change', this.inputChange);\n        this.option.fileInput.removeEventListener('dragover', ArtplayerToolThumbnail.ondragover);\n        this.option.fileInput.removeEventListener('drop', ArtplayerToolThumbnail.ondrop);\n        document.body.removeChild(this.video);\n        if (this.videoUrl) {\n            URL.revokeObjectURL(this.videoUrl);\n        }\n        if (this.thumbnailUrl) {\n            URL.revokeObjectURL(this.thumbnailUrl);\n        }\n        this.emit('destroy');\n    }\n}\n\nexport default ArtplayerToolThumbnail;\n"],"names":["_typeof","sleep","ms","Promise","resolve","setTimeout","runPromisesInSeries","ps","reduce","p","next","then","getFileName","name","nameArray","split","pop","join","clamp","num","a","b","Math","max","min","ArtplayerToolThumbnail","option","processing","setup","Object","assign","DEFAULTS","video","creatVideo","duration","inputChange","bind","ondrop","fileInput","addEventListener","ondragover","e","preventDefault","file","dataTransfer","files","loadVideo","delay","number","width","height","column","errorHandle","Element","tagName","type","style","position","newFileInput","document","createElement","left","top","right","bottom","opacity","appendChild","forEach","item","canPlayType","videoUrl","URL","createObjectURL","emit","src","catch","err","message","start","begin","end","density","screenshotDate","creatScreenshotDate","canvas","creatCanvas","context2D","getContext","promiseList","map","index","currentTime","time","drawImage","x","y","toBlob","blob","thumbnailUrl","revokeObjectURL","timeGap","timePoints","length","last","push","floor","ceil","fillStyle","fillRect","font","fillText","elink","download","href","body","click","removeChild","condition","msg","Error","removeEventListener","muted","controls","NaN","Emitter"],"mappings":"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"}